{% extends "base.html" %}
{% block content %}
<div class="checkout-container" style="max-width:600px;margin:40px auto;padding:30px;background:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
    <h1>Checkout</h1>
    <form method="POST" action="{{ url_for('order_confirmation') }}">
        <h2>Shipping Address</h2>
        <div class="form-group">
            <label for="address">Address</label>
            <input type="text" id="address" name="address" required>
        </div>
        <div class="form-group">
            <label for="city">City</label>
            <input type="text" id="city" name="city" required>
        </div>
        <div class="form-group">
            <label for="zip">ZIP/Postal Code</label>
            <input type="text" id="zip" name="zip" required>
        </div>
        <div class="form-group">
            <label for="country">Country</label>
            <input type="text" id="country" name="country" value="India" required>
        </div>
        <h2>Payment Method</h2>
        <label><input type="radio" name="payment_method" value="cod" checked> Cash on Delivery</label><br>
        <label><input type="radio" name="payment_method" value="card"> Credit/Debit Card</label>
        <div id="cardDetails" style="display:none; margin-top:10px;">
            <div class="form-group">
                <label for="cardNumber">Card Number</label>
                <input type="text" id="cardNumber" name="card_number" maxlength="16">
            </div>
            <div class="form-group">
                <label for="cardExpiry">Expiry Date</label>
                <input type="text" id="cardExpiry" name="card_expiry" placeholder="MM/YY" maxlength="5">
            </div>
            <div class="form-group">
                <label for="cardCVV">CVV</label>
                <input type="password" id="cardCVV" name="card_cvv" maxlength="4">
            </div>
        </div>
        <h2>Order Summary</h2>
        <div class="order-summary" style="background:#f8f9fa;padding:15px;border-radius:6px;margin-bottom:15px;">
            {% if products %}
                <ul style="list-style:none;padding:0;">
                {% for item in products %}
                    <li style="margin-bottom:8px;">
                        <strong>{{ item.product.name }}</strong> x{{ item.quantity }} - ₹{{ item.subtotal }}
                    </li>
                {% endfor %}
                </ul>
                <div style="font-weight:bold;">Total: ₹{{ total }}</div>
            {% else %}
                <p>Your cart is empty.</p>
            {% endif %}
        </div>
        <button type="submit" class="btn-checkout">Place Order</button>
    </form>
</div>
<script>
// Show/hide card details based on payment method
const paymentRadios = document.getElementsByName('payment_method');
const cardDetails = document.getElementById('cardDetails');
paymentRadios.forEach(radio => {
    radio.addEventListener('change', function() {
        if (this.value === 'card') {
            cardDetails.style.display = 'block';
        } else {
            cardDetails.style.display = 'none';
        }
    });
});
</script>
{% endblock %}
